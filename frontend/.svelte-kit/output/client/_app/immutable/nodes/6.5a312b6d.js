import{s as L,n as G,r as Q}from"../chunks/scheduler.63274e7e.js";import{S as W,i as X,g as o,s as S,h as u,j as T,y as O,c as V,f as g,k as e,a as K,x as l,A as N,B as w,C as Y}from"../chunks/index.d7c298af.js";import{F as Z}from"../chunks/film-store.75b5ca4c.js";import{j as $}from"../chunks/singletons.fe9d2f3b.js";const tt=$("goto");function J(c){let t,a="Form data is not valid";return{c(){t=o("h4"),t.textContent=a,this.h()},l(r){t=u(r,"H4",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-1e06wh1"&&(t.textContent=a),this.h()},h(){e(t,"class","text-danger")},m(r,m){K(r,t,m)},d(r){r&&g(t)}}}function et(c){let t,a,r="Add a Film",m,_,v,s,y,p,U,C,f,k,I,n,F,D,P,j,E,A="Submit",x,B,i=c[4]&&J();return{c(){t=o("div"),a=o("h2"),a.textContent=r,m=S(),i&&i.c(),_=S(),v=o("div"),s=o("form"),y=o("div"),p=o("input"),U=S(),C=o("div"),f=o("input"),k=S(),I=o("div"),n=o("input"),F=S(),D=o("div"),P=o("input"),j=S(),E=o("button"),E.textContent=A,this.h()},l(d){t=u(d,"DIV",{});var h=T(t);a=u(h,"H2",{class:!0,"data-svelte-h":!0}),O(a)!=="svelte-lvw8k2"&&(a.textContent=r),m=V(h),i&&i.l(h),_=V(h),v=u(h,"DIV",{class:!0});var H=T(v);s=u(H,"FORM",{});var b=T(s);y=u(b,"DIV",{class:!0});var M=T(y);p=u(M,"INPUT",{class:!0,type:!0,placeholder:!0}),M.forEach(g),U=V(b),C=u(b,"DIV",{class:!0});var q=T(C);f=u(q,"INPUT",{class:!0,type:!0,placeholder:!0}),q.forEach(g),k=V(b),I=u(b,"DIV",{class:!0});var R=T(I);n=u(R,"INPUT",{class:!0,type:!0,placeholder:!0}),R.forEach(g),F=V(b),D=u(b,"DIV",{class:!0});var z=T(D);P=u(z,"INPUT",{class:!0,type:!0}),z.forEach(g),j=V(b),E=u(b,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),O(E)!=="svelte-1b10frf"&&(E.textContent=A),b.forEach(g),H.forEach(g),h.forEach(g),this.h()},h(){e(a,"class","my-4"),e(p,"class","form-control"),e(p,"type","text"),e(p,"placeholder","name"),e(y,"class","mb-3"),e(f,"class","form-control"),e(f,"type","text"),e(f,"placeholder","director"),e(C,"class","mb-3"),e(n,"class","form-control"),e(n,"type","text"),e(n,"placeholder","description"),e(I,"class","mb-3"),e(P,"class","form-control"),e(P,"type","file"),e(D,"class","mb-3"),e(E,"class","btn btn-primary"),e(E,"type","submit"),e(v,"class","col-12 col-md-6")},m(d,h){K(d,t,h),l(t,a),l(t,m),i&&i.m(t,null),l(t,_),l(t,v),l(v,s),l(s,y),l(y,p),N(p,c[0]),l(s,U),l(s,C),l(C,f),N(f,c[1]),l(s,k),l(s,I),l(I,n),N(n,c[2]),l(s,F),l(s,D),l(D,P),l(s,j),l(s,E),x||(B=[w(p,"input",c[6]),w(f,"input",c[7]),w(n,"input",c[8]),w(P,"change",c[9]),w(s,"submit",Y(c[5]))],x=!0)},p(d,[h]){d[4]?i||(i=J(),i.c(),i.m(t,_)):i&&(i.d(1),i=null),h&1&&p.value!==d[0]&&N(p,d[0]),h&2&&f.value!==d[1]&&N(f,d[1]),h&4&&n.value!==d[2]&&N(n,d[2])},i:G,o:G,d(d){d&&g(t),i&&i.d(),x=!1,Q(B)}}}function lt(c,t,a){let r="",m="",_="",v,s=!1,y=()=>r.length>4&&m.length>4&&_.length>10,p=()=>{if(!y()){a(4,s=!0);return}const I="http://localhost:8000/api/films/";let n=new FormData;n.append("name",r),n.append("director",m),n.append("description",_),n.append("image",v[0]),fetch(I,{method:"POST",body:n}).then(F=>F.json()).then(F=>{Z.update(D=>[...D,F])}),tt("/films/")};function U(){r=this.value,a(0,r)}function C(){m=this.value,a(1,m)}function f(){_=this.value,a(2,_)}function k(){v=this.files,a(3,v)}return[r,m,_,v,s,p,U,C,f,k]}class rt extends W{constructor(t){super(),X(this,t,lt,et,L,{})}}export{rt as component};
